name: Sync Upstream  # å·¥ä½œæµåç§°ï¼Œå¯è‡ªå®šä¹‰

on:                   # å®šä¹‰è§¦å‘æ¡ä»¶
  schedule:           # å®šæ—¶ä»»åŠ¡ï¼šæ¯å¤©å‡Œæ™¨3ç‚¹ï¼ˆUTCï¼‰
    - cron: "0 3 * * *"
  workflow_dispatch:  # æ”¯æŒæ‰‹åŠ¨è§¦å‘

permissions:          # æƒé™è®¾ç½®ï¼ˆè¿™é‡Œå…è®¸å†™æƒé™ï¼‰
  contents: write

jobs:
  sync:               # å®šä¹‰ä¸€ä¸ªåä¸º sync çš„ä»»åŠ¡
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0  # è·å–å®Œæ•´å†å²è®°å½•ï¼Œä¾¿äºåˆå¹¶

      - name: Add upstream
        run: |
          git remote add upstream https://github.com/LibreSpark/LibreTV.git
          git fetch upstream
          git merge upstream/main --allow-unrelated-histories -m "ğŸ”ƒ Sync from upstream"
          git push origin main
